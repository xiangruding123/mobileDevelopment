!function(e){function t(){FL.ajaxDate("get",sms_code_init,{mobile:n},function(e){if("0"===e.error){var t=e.result;countdown=t.countdown,if_captcha=t.if_captcha,mobile_correct=t.mobile_correct,sms_available=t.sms_available,$("#getCode").attr("countdown",countdown),t.last_countdown&&FL.countDown(t.last_countdown,$("#getCode")),"1"==if_captcha?($("#img_secode").attr("src",WapSiteUrl+"/api/index.php?act=common_index&op=get_captcha&flag=wap&mobile="+n),i()):($("#secodebox").hide(),a()),$(".agree").click(function(){if($(this).hasClass("yes"))$(this).prop("src","../../images/wap/login/noagree.png"),$(this).removeClass("yes"),$("#nextStep").attr("disabled","disabled");else{$(this).prop("src","../../images/wap/login/agree.png"),$(this).addClass("yes");var e=$("#password").val().length;e>5&&e<21&&$("#code").val().length>3&&$("#nextStep").removeAttr("disabled")}}),$(".cleareye").click(function(){"text"==$("#password").attr("type")?($("#password").prop("type","password"),$(".cleareye").prop("src","../../src/images/wap/login/eye.png")):($("#password").prop("type","text"),$(".cleareye").prop("src","../../src/images/wap/login/eyeclick.png"))}),$(".cleartext").click(function(){$(this).parent("div").find("input").val("").focus(),$(this).hide()})}})}function a(){$("#getCode").click(function(){if($("#getCode").hasClass("nogetcode"))$("#secodebox").show(),$("#img_secode").attr("src",WapSiteUrl+"/api/index.php?act=common_index&op=get_captcha&flag=wap&mobile="+n),i();else{var e=$("#getCode").attr("countdown");$("#code").focus(),FL.getSmsCode(n,e,"getCode")}}),$("#code").keyup(function(){var e=this,t=$(e).val().length;t>1?$(".cleartext").show():$(".cleartext").hide();var a=$("#password").val().length;a>5&&a<21&&t>3&&$(".agree").hasClass("yes")?$("#nextStep").removeAttr("disabled"):$("#nextStep").attr("disabled","disabled")}),$("#password").keyup(function(){var e=this,t=$(e).val().length;t>5&&t<21&&$("#code").val().length>3&&$(".agree").hasClass("yes")?$("#nextStep").removeAttr("disabled"):$("#nextStep").attr("disabled","disabled")}),o(),$("#nextStep").click(function(){r()})}function o(){$("#registerForm").validate({rules:{code:"required",password:{required:!0,minlength:6,maxlength:20}},messages:{code:"手机验证码必填",password:{required:"登录密码必填",minlength:"密码长度不得小于6个字符",maxlength:"密码长度不得大于20个字符"}},errorPlacement:function(e,t){var a=e.text(),o='<div class="tooltip-top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-in">'+a+"</div></div>";$(".tooltip-top").remove(),t.before(o)}})}function i(){$("#getCode").click(function(){if(4!=$("#secode").val().length)layer.msg("请输入正确的图形验证码");else{var e=$("#getCode").attr("countdown");$("#code").focus(),FL.getSmsCode(n,e,"getCode",$("#secode").val())}}),$("#secode,#code").keyup(function(){var e=this,t=$(e).val().length,a=$(e).parent("div").find(".cleartext");t>1?a.show():a.hide();var o=$("#password").val().length;o>5&&o<21&&$("#code").val().length>3&&$(".agree").hasClass("yes")?$("#nextStep").removeAttr("disabled"):$("#nextStep").attr("disabled","disabled")}),$("#nextStep").click(function(){$("#registerForm").valid()&&r()}),$("#password").keyup(function(){var e=this;$(e).val().length>5&&$(e).val().length<21&&$("#code").val().length>3&&$(".agree").hasClass("yes")?$("#nextStep").removeAttr("disabled"):$("#nextStep").attr("disabled","disabled")}),o()}function r(){var e=$("input[name='code']").val();FL.ajaxDate("post",check_phone_code,{num:n,code:e},function(e){"0"===e.error?s():layer.msg(e.msg)})}function s(){var e=$("input[name='code']").val(),t=hex_md5($("input[name='password']").val());FL.ajaxDate("post",member_register,{mobile:n,code:e,password:t},function(e){"0"===e.error&&(layer.msg("注册成功"),addcookie("member_name",e.result.member_name),addcookie("mid",e.result.member_id,365),addcookie("token",e.result.token,365),addcookie("member_mobile",e.result.member_mobile),addcookie("nickname",e.result.member_nickname),addcookie("store_id",e.result.store_id,365),addcookie("if_shoper",e.result.if_shoper,365),addcookie("talent_id",e.result.talent_id,365),setTimeout(function(){location.href="../member/person.html"},2500))})}var n=GetQueryString("account");$(".merber").text(n),$("#agreement").click(function(){$(".iframehead").show(),$("iframe").show()}),$(".iframehead .goback").click(function(){$(".iframehead").hide(),$("iframe").hide()});var d=function(){this.onLoad=function(){t()}};e.Member=e.Member||{},Member.Register1=new d}(this);