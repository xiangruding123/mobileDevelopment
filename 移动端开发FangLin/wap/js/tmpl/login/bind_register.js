!function(e){function o(){$("#registerForm").validate({rules:{password:"required",com_pwd:{required:!0,equalTo:"#login_pwd"}},messages:{password:"登录密码必填",com_pwd:{required:"请输入您的确认密码",equalTo:"两次输入密码不一致"}},errorPlacement:function(e,o){var i=e.text(),t='<div class="tooltip-top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-in">'+i+"</div></div>";$(".tooltip-top").remove(),o.before(t)}})}function i(){$("#register").click(function(){$("#registerForm").valid()&&t()})}function t(){var e=GetQueryString("code"),o=GetQueryString("num"),i=$("input[name='password']").val(),t=GetQueryString("info");$.ajax({type:"post",url:WapSiteUrl+"/api/index.php?act=common_member&op=third_register&test=1",data:{flag:"wap",type:"wx",mobile:o,code:e,pwd:i,info:t},dataType:"json",success:function(e){if(e&&0==e.error){addcookie("member_name",e.result.member_name),addcookie("mid",e.result.member_id),addcookie("token",e.result.token),addcookie("member_mobile",e.result.member_mobile),addcookie("store_id",e.result.store_id),addcookie("if_shoper",e.result.if_shoper),addcookie("talent_id",e.result.talent_id,365),localStorage.setItem("unionid",t.unionid),localStorage.setItem("info",JSON.stringify(t));var o=unescape(getcookie("thirdBack"));o.indexOf("forget_pwd_two")>0||o.indexOf("modify_password_two")>0||o.indexOf("register2")>0||o.indexOf("setting")>0||""==o||o.indexOf("bag_details")>0||o.indexOf("fenhongshop")<0?location.href="../member/person.html":location.href=o}}})}var r=function(){this.onLoad=function(){o(),i()}};e.Member=e.Member||{},Member.ThirdRegister=new r}(this);